<html>
    <head>
        <script src="https://unpkg.com/vue@next"></script>
    </head>
    <body>
        <div id="app"></div>
        <script>

            const {
                createApp,
                defineComponent,
                setup,
                ref,
                onMounted,
                onUnmounted
            }

            function fetchLocation(){
                let watcher;

                const geoLocation = navigator.geolocation;

                const gpsTime = ref(Date.now());

                const coordinates = ref({
                    accuracy: 0,
                    latitude: 0,
                    altitude: 0,
                    altitudeAccuracy: 0,
                    heading: 0,
                    speed: 0,
                });

                function setPosition(payload){
                    gpsTime.value = payload.timestamp;
                    cordinates.value = payload.coords;
                }

                onMounted(()=> {
                    if (geoLocation) watcher = geoLocation.watchPosition(setPosition);
                });

                onUnmounted(() => {
                    if (watcher) geoLocation.clearWatch(watcher);
                });

                return {
                    coordinates,
                    gpsTime
                }
            }

            const appComponent = defineComponent({
                setup(){
                    const {
                        coordinates,
                        gpsTime,
                    } =fetchLocation();

                    conts formatOptions = {
                        year: 'numeric',
                        month: 'numeric',
                        day: 'numeric',
                        hour: 'numeric',
                        minute: 'numeric',
                        hour12: 'numeric',
                    }
                },
                template:``
            })
     
        </script>
    </body>
</html>